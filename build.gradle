plugins {
  id 'java'
  id 'maven'
  id 'distribution'
  id 'net.researchgate.release' version '2.3.4'
}

sourceCompatibility = 1.7

version = "0.3.0-SNAPSHOT"

distributions {
    main {
        baseName = 'someName'
        contents {
            from { 'src/readme' }
        }
    }
}

uploadArchives {
    repositories {
        mavenDeployer {
            repository(url: "file://some/repo")
        }
    }
}


task copyRuntimeLibs(type: Copy) {
  into "build/libs/lib"
  from configurations.runtime
}

repositories {
    mavenCentral()
    maven {
        url 'http://updates.jmonkeyengine.org/maven'
    }
}

def versions = [
     jme3: '3.0.+',
  jackson: '2.7.0',
]

dependencies {
  compile group: 'com.jme3', name: 'jme3-core',  version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-effects',    version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-networking', version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-plugins',    version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-jogg',       version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-terrain',    version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-blender',    version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-jbullet',    version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-niftygui',   version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-desktop',    version: versions.jme3
  compile group: 'com.jme3', name: 'jme3-lwjgl',      version: versions.jme3

  compile group: 'org.bushe', name: 'eventbus', version: '1.4'
  compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: versions.jackson
  
  compile fileTree(dir: 'libs', include: '*.jar')
}

task cp << {
  println configurations.compile.resolve().join('\n') + ' lib/assets.jar'
}

jar {
  manifest {
    attributes([
      'Main-Class': 'com.codebetyars.skyhussars.SkyHussars',
      'Implementation-Title': 'SkyHussars',
      'Implementation-Version': version,
      'Class-Path': configurations.compile.collect { 'lib/' + it.getName() }.join('\n') + ' lib/assets.jar',
    ])
  }
}
